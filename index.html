<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€ì˜ì´ì˜ ì˜ì–´ ê³µë¶€ë°©</title>
    <style>
        :root { --primary: #ff4757; --secondary: #007aff; --bg: #fff9f9; }
        body { font-family: 'Apple SD Gothic Neo', sans-serif; text-align: center; padding: 20px; background-color: var(--bg); margin: 0; }
        .container { max-width: 400px; margin: 0 auto; }
        .situation-tag { background: #ffeaa7; color: #d63031; padding: 10px 20px; border-radius: 50px; font-weight: bold; margin-bottom: 25px; display: inline-block; }
        .card { background: white; padding: 40px 20px; border-radius: 30px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); border: 2px solid #ffccd5; margin-bottom: 15px; min-height: 180px; display: flex; flex-direction: column; justify-content: center; position: relative; }
        .english { font-size: 24px; font-weight: bold; color: var(--secondary); margin-bottom: 12px; line-height: 1.3; }
        .meaning { font-size: 18px; color: #444; margin-bottom: 8px; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-group { display: flex; gap: 10px; margin-bottom: 20px; }
        .nav-btn { flex: 1; padding: 18px; border-radius: 15px; border: none; background: var(--primary); color: white; cursor: pointer; font-size: 17px; font-weight: bold; box-shadow: 0 4px 0 #e03a49; }
        .sub-btn { background: #555; box-shadow: 0 4px 0 #333; font-size: 14px; padding: 10px; }
        
        /* ì „ì²´ ëŒ€ë³¸ ë°•ìŠ¤ */
        #script-board { background: #fff; text-align: left; padding: 20px; border-radius: 20px; margin-top: 20px; display: none; border: 1px dashed #ff4757; }
        .script-item { margin-bottom: 15px; font-size: 15px; }
        .script-item b { color: var(--secondary); }
    </style>
</head>
<body>
    <div class="container">
        <div class="situation-tag" id="lbl-situation">ğŸ“ ì¤€ë¹„ ì¤‘...</div>
        
        <div class="card">
            <div class="meaning" id="lbl-meaning"></div>
            <div class="english" id="lbl-english"></div>
            <button class="nav-btn sub-btn" onclick="playCurrent()">ğŸ”Š ë°œìŒ ë“£ê¸°</button>
        </div>

        <div class="btn-group">
            <button class="nav-btn" id="btn-next" onclick="nextStep()">ë‹¤ìŒ ë¬¸ì¥ â¡ï¸</button>
        </div>
        
        <button class="nav-btn sub-btn" style="width:100%;" onclick="toggleFullScript()">ğŸ“œ ì „ì²´ ëŒ€ë³¸ ë³´ê¸°/ë‹«ê¸°</button>
        
        <div id="script-board"></div>
        
        <button class="nav-btn" id="btn-restart" style="display:none; margin-top:20px; background:#007aff; box-shadow: 0 4px 0 #0056b3;" onclick="location.reload()">ë‹¤ë¥¸ ì£¼ì œë¡œ ê³µë¶€í•˜ê¸° ğŸ”„</button>
    </div>

    <script>
        const scripts = [
            { sit: "ì¹´í˜ì—ì„œ ì£¼ë¬¸í•˜ê¸°", lines: [
                {en:"I'd like an iced Americano, please.", ko:"ì•„ì´ìŠ¤ ì•„ë©”ë¦¬ì¹´ë…¸ í•œ ì” ì£¼ì„¸ìš”."},
                {en:"Anything else for you?", ko:"ë” í•„ìš”í•˜ì‹  ê±° ì—†ìœ¼ì„¸ìš”?"},
                {en:"That's all. How much is it?", ko:"ê·¸ê²Œ ë‹¤ì˜ˆìš”. ì–¼ë§ˆì¸ê°€ìš”?"}
            ]},
            { sit: "ë¹„í–‰ê¸° ì•ˆì—ì„œ", lines: [
                {en:"Could I get a blanket, please?", ko:"ë‹´ìš” í•œ ì¥ ë°›ì„ ìˆ˜ ìˆì„ê¹Œìš”?"},
                {en:"Sure, I'll bring one for you.", ko:"ë¬¼ë¡ ì´ì£ , í•˜ë‚˜ ê°€ì ¸ë‹¤ë“œë¦´ê²Œìš”."},
                {en:"Thank you. And some water too.", ko:"ê³ ë§™ìŠµë‹ˆë‹¤. ë¬¼ë„ ì¢€ ë¶€íƒí•´ìš”."}
            ]},
            { sit: "ì‡¼í•‘ í›„ ê²°ì œ", lines: [
                {en:"Do you accept credit cards?", ko:"ì‹ ìš©ì¹´ë“œ ë°›ìœ¼ì‹œë‚˜ìš”?"},
                {en:"Yes, we accept all major cards.", ko:"ë„¤, ëª¨ë“  ì£¼ìš” ì¹´ë“œë¥¼ ë°›ìŠµë‹ˆë‹¤."},
                {en:"Can I get a receipt?", ko:"ì˜ìˆ˜ì¦ ì£¼ì‹œê² ì–´ìš”?"}
            ]}
        ];

        let currentScript = scripts[Math.floor(Math.random() * scripts.length)];
        let idx = 0;

        function render() {
            const line = currentScript.lines[idx];
            document.getElementById('lbl-situation').innerText = "ğŸ“ ìƒí™©: " + currentScript.sit;
            document.getElementById('lbl-english').innerText = line.en;
            document.getElementById('lbl-meaning').innerText = line.ko;
            playCurrent(); // í™”ë©´ ë°”ë€” ë•Œ ìë™ ë°œìŒ
        }

        function playCurrent() {
            window.speechSynthesis.cancel();
            const ut = new SpeechSynthesisUtterance(currentScript.lines[idx].en);
            ut.lang = 'en-US';
            window.speechSynthesis.speak(ut);
        }

        function nextStep() {
            if (idx < currentScript.lines.length - 1) {
                idx++;
                render();
            } else {
                document.getElementById('btn-next').style.display = 'none';
                document.getElementById('btn-restart').style.display = 'block';
                showFullScript();
            }
        }

        function showFullScript() {
            const board = document.getElementById('script-board');
            let html = "<h4>ì˜¤ëŠ˜ì˜ ëŒ€ë³¸ ìš”ì•½</h4>";
            currentScript.lines.forEach(l => {
                html += `<div class='script-item'><b>Q:</b> ${l.en}<br><small>${l.ko}</small></div>`;
            });
            board.innerHTML = html;
        }

        function toggleFullScript() {
            const board = document.getElementById('script-board');
            if(board.style.display === 'none' || !board.style.display) {
                showFullScript();
                board.style.display = 'block';
            } else {
                board.style.display = 'none';
            }
        }

        render();
    </script>
</body>
</html>
